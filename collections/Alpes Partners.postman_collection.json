{
	"info": {
		"_postman_id": "89de39d6-93cc-42b2-8e63-db59fa1c403d",
		"name": "Alpes Partners",
		"description": "Colecci√≥n completa para probar los 4 microservicios de campa√±as con arquitectura hexagonal",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "13706451"
	},
	"item": [
		{
			"name": "‚úÖ health checks",
			"item": [
				{
					"name": "afiliaciones - health check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_afiliaciones}}/health",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "marca - health check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_marca}}/health",
							"host": [
								"{{base_url_marca}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "influencer - health check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_influencer}}/health",
							"host": [
								"{{base_url_influencer}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "tracking - health check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_tracking}}/health",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üåê afiliaciones service",
			"item": [
				{
					"name": "crear campa√±a",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Extraer ID de campa√±a de la respuesta",
									"if (pm.response.code === 200 || pm.response.code === 201) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.id) {",
									"        pm.collectionVariables.set('campana_id', responseJson.id);",
									"    }",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Campa√±a de Verano 2024\",\n    \"descripcion\": \"Promoci√≥n de productos de verano con influencers\",\n    \"tipo\": \"influencer\",\n    \"fecha_inicio\": \"2025-01-01T00:00:00\",\n    \"fecha_fin\": \"2025-12-31T23:59:59\",\n    \"presupuesto\": 15000,\n    \"marca\": {\n        \"id_marca\": \"{{marca_id}}\",\n        \"nombre_marca\": \"Nike\"\n    },\n    \"influencers\": [\n        {\n            \"nombre\": \"Ana Garc√≠a\",\n            \"plataforma\": \"Instagram\",\n            \"seguidores\": 150000,\n            \"categoria\": \"Fitness\"\n        },\n        {\n            \"nombre\": \"Carlos L√≥pez\",\n            \"plataforma\": \"TikTok\",\n            \"seguidores\": 300000,\n            \"categoria\": \"Lifestyle\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campana",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campana"
							]
						}
					},
					"response": []
				},
				{
					"name": "obtener campa√±a por id",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campana/{{campana_id}}",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campana",
								"{{campana_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "obtener todas las campa√±as",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campanas",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campanas"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üîÆ sagas",
			"item": [
				{
					"name": "crear campa√±a usando saga",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Extraer ID de campa√±a de la respuesta",
									"if (pm.response.code === 200 || pm.response.code === 201) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.id_saga) {",
									"        pm.collectionVariables.set('saga_id', responseJson.id_saga);",
									"    }",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Campa√±a de Verano 2024\",\n    \"descripcion\": \"Promoci√≥n de productos de verano con influencers\",\n    \"tipo\": \"influencer\",\n    \"fecha_inicio\": \"2025-01-01T00:00:00\",\n    \"fecha_fin\": \"2025-12-31T23:59:59\",\n    \"presupuesto\": 15000,\n    \"marca\": {\n        \"id_marca\": \"{{marca_id}}\",\n        \"nombre_marca\": \"Nike\"\n    },\n    \"influencers\": [\n        {\n            \"nombre\": \"Ana Garc√≠a\",\n            \"plataforma\": \"Instagram\",\n            \"seguidores\": 150000,\n            \"categoria\": \"Fitness\"\n        },\n        {\n            \"nombre\": \"Carlos L√≥pez\",\n            \"plataforma\": \"TikTok\",\n            \"seguidores\": 300000,\n            \"categoria\": \"Lifestyle\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campana-saga",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campana-saga"
							]
						}
					},
					"response": []
				},
				{
					"name": "obtener sagas por id",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/saga/{{saga_id}}/estado",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"saga",
								"{{saga_id}}",
								"estado"
							]
						}
					},
					"response": []
				},
				{
					"name": "obtener historial de sagas",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/sagas/historial",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"sagas",
								"historial"
							]
						}
					},
					"response": []
				},
				{
					"name": "obtener estadisticas de sagas",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/sagas/estadisticas",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"sagas",
								"estadisticas"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üåê tracking service",
			"item": [
				{
					"name": "registrar evento - vista",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id_campana\": \"{{campana_id}}\",\n  \"tipo_evento\": \"vista\",\n  \"datos\": {\n    \"usuario\": \"user123\",\n    \"timestamp\": {{$timestamp}},\n    \"fuente\": \"instagram\",\n    \"dispositivo\": \"mobile\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url_tracking}}/tracking/evento",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"tracking",
								"evento"
							]
						}
					},
					"response": []
				},
				{
					"name": "registrar evento - click",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id_campana\": \"{{campana_id}}\",\n  \"tipo_evento\": \"clic\",\n  \"datos\": {\n    \"usuario\": \"user123\",\n    \"timestamp\": {{$timestamp}},\n    \"elemento\": \"boton_cta\",\n    \"posicion\": \"header\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url_tracking}}/tracking/evento",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"tracking",
								"evento"
							]
						}
					},
					"response": []
				},
				{
					"name": "registrar evento - conversi√≥n",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id_campana\": \"{{campana_id}}\",\n  \"tipo_evento\": \"conversion\",\n  \"datos\": {\n    \"usuario\": \"user123\",\n    \"timestamp\": {{$timestamp}},\n    \"valor_compra\": 150.50,\n    \"producto\": \"producto_verano_001\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url_tracking}}/tracking/evento",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"tracking",
								"evento"
							]
						}
					},
					"response": []
				},
				{
					"name": "registrar evento - engagement",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id_campana\": \"{{campana_id}}\",\n  \"tipo_evento\": \"engagement\",\n  \"datos\": {\n    \"usuario\": \"user123\",\n    \"timestamp\": {{$timestamp}},\n    \"valor\": 0.85,\n    \"tipo\": \"like\",\n    \"plataforma\": \"instagram\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url_tracking}}/tracking/evento",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"tracking",
								"evento"
							]
						}
					},
					"response": []
				},
				{
					"name": "registrar evento - compartir",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id_campana\": \"{{campana_id}}\",\n  \"tipo_evento\": \"compartir\",\n  \"datos\": {\n    \"usuario\": \"user123\",\n    \"timestamp\": {{$timestamp}},\n    \"plataforma\": \"instagram\",\n    \"tipo_contenido\": \"story\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url_tracking}}/tracking/evento",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"tracking",
								"evento"
							]
						}
					},
					"response": []
				},
				{
					"name": "registrar evento - comentario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id_campana\": \"{{campana_id}}\",\n  \"tipo_evento\": \"comentario\",\n  \"datos\": {\n    \"usuario\": \"user123\",\n    \"timestamp\": {{$timestamp}},\n    \"texto\": \"¬°Me encanta este producto!\",\n    \"sentimiento\": \"positivo\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url_tracking}}/tracking/evento",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"tracking",
								"evento"
							]
						}
					},
					"response": []
				},
				{
					"name": "obtener eventos por campa√±a",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_tracking}}/tracking/eventos/{{campana_id}}",
							"host": [
								"{{base_url_tracking}}"
							],
							"path": [
								"tracking",
								"eventos",
								"{{campana_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üßæ casos de prueba - errores",
			"item": [
				{
					"name": "crear campa√±a - presupuesto invalido",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Campa√±a de Verano 2024\",\n    \"descripcion\": \"Promoci√≥n de productos de verano con influencers\",\n    \"tipo\": \"influencer\",\n    \"fecha_inicio\": \"2025-01-01T00:00:00\",\n    \"fecha_fin\": \"2025-12-31T23:59:59\",\n    \"presupuesto\": 0,\n    \"marca\": {\n        \"id_marca\": \"{{marca_id}}\",\n        \"nombre_marca\": \"Nike\"\n    },\n    \"influencers\": [\n        {\n            \"nombre\": \"Ana Garc√≠a\",\n            \"plataforma\": \"Instagram\",\n            \"seguidores\": 150000,\n            \"categoria\": \"Fitness\"\n        },\n        {\n            \"nombre\": \"Carlos L√≥pez\",\n            \"plataforma\": \"TikTok\",\n            \"seguidores\": 300000,\n            \"categoria\": \"Lifestyle\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campana",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campana"
							]
						}
					},
					"response": []
				},
				{
					"name": "crear campa√±a - sin nombre",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"\",\n    \"descripcion\": \"Promoci√≥n de productos de verano con influencers\",\n    \"tipo\": \"influencer\",\n    \"fecha_inicio\": \"2025-01-01T00:00:00\",\n    \"fecha_fin\": \"2025-12-31T23:59:59\",\n    \"presupuesto\": 1500,\n    \"marca\": {\n        \"id_marca\": \"{{marca_id}}\",\n        \"nombre_marca\": \"Nike\"\n    },\n    \"influencers\": [\n        {\n            \"nombre\": \"Ana Garc√≠a\",\n            \"plataforma\": \"Instagram\",\n            \"seguidores\": 150000,\n            \"categoria\": \"Fitness\"\n        },\n        {\n            \"nombre\": \"Carlos L√≥pez\",\n            \"plataforma\": \"TikTok\",\n            \"seguidores\": 300000,\n            \"categoria\": \"Lifestyle\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campana",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campana"
							]
						}
					},
					"response": []
				},
				{
					"name": "crear campa√±a - tipo inv√°lido",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id_marca\": \"{{marca_id}}\",\n  \"nombre\": \"Campa√±a con Error\",\n  \"descripcion\": \"Campa√±a con tipo inv√°lido\",\n  \"tipo\": \"tipo_invalido\",\n  \"presupuesto\": 1000.0\n}"
						},
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campana",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campana"
							]
						}
					},
					"response": []
				},
				{
					"name": "obtener campa√±a inexistente",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_afiliaciones}}/afiliaciones/campana/00000000-0000-0000-0000-000000000000",
							"host": [
								"{{base_url_afiliaciones}}"
							],
							"path": [
								"afiliaciones",
								"campana",
								"00000000-0000-0000-0000-000000000000"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Generar IDs √∫nicos si no existen",
					"if (!pm.collectionVariables.get('marca_id')) {",
					"    pm.collectionVariables.set('marca_id', pm.variables.replaceIn('{{$randomUUID}}'));",
					"}",
					"",
					"// Generar timestamp actual",
					"pm.collectionVariables.set('current_timestamp', Math.floor(Date.now() / 1000));"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"",
					"// Log de respuesta para debugging",
					"console.log('Response Status:', pm.response.code);",
					"console.log('Response Body:', pm.response.text());"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url_afiliaciones",
			"value": "http://localhost:8001"
		},
		{
			"key": "base_url_marca",
			"value": "http://localhost:8002"
		},
		{
			"key": "base_url_influencer",
			"value": "http://localhost:8003"
		},
		{
			"key": "base_url_tracking",
			"value": "http://localhost:8004"
		},
		{
			"key": "marca_id",
			"value": "123e4567-e89b-12d3-a456-426614174000"
		},
		{
			"key": "campana_id",
			"value": ""
		},
		{
			"key": "current_timestamp",
			"value": ""
		},
		{
			"key": "saga_id",
			"value": "",
			"type": "default"
		}
	]
}